import{N as e,z as t,M as s,y as a,U as r,V as l,X as d,a0 as i,e as n,am as c}from"./vendor-react-CWmbX_Im.js";import{P as o}from"./vendor-pdf-Chr6DQ98.js";import"./vendor-CIxjMMAQ.js";const x=()=>{const[x,m]=e.useState(null),[h,u]=e.useState(!1),[b,p]=e.useState(null),[g,j]=e.useState(null),[f,N]=e.useState(null),[k,w]=e.useState(!0),[v,y]=e.useState(!1),z=e.useRef(null),S=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]};return t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-8 md:p-12",children:x?t.jsxs("div",{className:"py-12 flex flex-col items-center justify-center animate-fade-in text-center",children:[t.jsx("div",{className:"w-24 h-24 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6",children:t.jsx(d,{className:"w-12 h-12 text-green-600"})}),t.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Optimization Complete!"}),t.jsxs("div",{className:"flex items-center gap-4 mb-8 text-sm justify-center",children:[t.jsx("div",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg text-slate-500 line-through",children:g&&S(g.size)}),t.jsx("div",{className:"text-slate-400",children:"â†’"}),t.jsx("div",{className:"px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg font-bold",children:f&&S(f)})]}),t.jsx("p",{className:"text-slate-500 mb-8 max-w-md mx-auto",children:f&&g&&f<g.size?`File size reduced by ${Math.round((g.size-f)/g.size*100)}%. Structure cleaned.`:"Structure optimized. No further reduction possible without quality loss."}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsxs("a",{href:x,download:`optimized-${null==g?void 0:g.name}`,className:"py-4 px-8 bg-primary-600 text-white rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors",children:[t.jsx(i,{className:"w-5 h-5"})," Download PDF"]}),t.jsx("button",{onClick:()=>{m(null),j(null)},className:"py-4 px-8 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:"Optimize Another"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-8 text-center",children:[t.jsx("label",{className:"block text-xl font-bold text-slate-900 dark:text-white mb-4",children:"Upload PDF to Optimize"}),g?t.jsxs("div",{className:"flex items-center justify-between bg-slate-50 dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600",children:t.jsx(s,{className:"w-8 h-8"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-bold text-slate-900 dark:text-white text-lg",children:g.name}),t.jsxs("p",{className:"text-sm text-slate-500",children:["Original size: ",S(g.size)]})]})]}),t.jsx("button",{onClick:()=>{j(null),z.current&&(z.current.value="")},className:"text-red-500 hover:text-red-700 font-medium",children:"Remove"})]}):t.jsxs("div",{onClick:()=>{var e;return null==(e=z.current)?void 0:e.click()},className:"border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-2xl p-12 flex flex-col items-center justify-center cursor-pointer hover:border-primary-500 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-all",children:[t.jsx(s,{className:"w-16 h-16 text-slate-400 mb-4"}),t.jsx("p",{className:"text-lg font-medium text-slate-700 dark:text-slate-300",children:"Click to upload PDF"}),t.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Optimizes structure & removes metadata"})]}),t.jsx("input",{type:"file",ref:z,className:"hidden",accept:"application/pdf",onChange:async e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s){if("application/pdf"!==s.type)return void p("Only PDF files allowed.");const e=await s.arrayBuffer();j({name:s.name,data:e,size:s.size}),m(null),N(null),p(null)}z.current&&(z.current.value="")}})]}),g&&t.jsxs("div",{className:"mb-8 p-6 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800",children:[t.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(a,{className:"w-4 h-4"})," Optimization Settings"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 cursor-pointer hover:border-primary-500 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:k,onChange:e=>w(e.target.checked),className:"w-5 h-5 rounded border-slate-300 text-primary-600 focus:ring-primary-500"}),t.jsxs("div",{children:[t.jsx("span",{className:"block font-medium text-slate-700 dark:text-slate-200",children:"Remove Metadata"}),t.jsx("span",{className:"block text-xs text-slate-500",children:"Strips Author, Title, Creator info"})]})]}),t.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 cursor-pointer hover:border-primary-500 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:v,onChange:e=>y(e.target.checked),className:"w-5 h-5 rounded border-slate-300 text-primary-600 focus:ring-primary-500"}),t.jsxs("div",{children:[t.jsx("span",{className:"block font-medium text-slate-700 dark:text-slate-200",children:"Flatten Forms"}),t.jsx("span",{className:"block text-xs text-slate-500",children:"Makes fields non-editable"})]})]})]})]}),t.jsxs("button",{onClick:async()=>{if(g){u(!0),p(null);try{const t=await o.load(g.data);if(v)try{t.getForm().flatten()}catch(e){}const s=await o.create();(await s.copyPages(t,t.getPageIndices())).forEach(e=>s.addPage(e)),k?(s.setTitle(""),s.setAuthor(""),s.setSubject(""),s.setKeywords([]),s.setCreator(""),s.setProducer("")):(s.setTitle(t.getTitle()||""),s.setAuthor(t.getAuthor()||""),s.setSubject(t.getSubject()||""));const a=await s.save(),r=new Blob([a],{type:"application/pdf"}),l=URL.createObjectURL(r);N(a.byteLength),m(l)}catch(t){p("Failed to process PDF. The file might be corrupted or password protected.")}finally{u(!1)}}},disabled:!g||h,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-bold text-lg shadow-xl shadow-primary-500/30 flex items-center justify-center gap-2 disabled:opacity-50 hover:bg-primary-700 transition-colors",children:[h?t.jsx(r,{className:"w-6 h-6 animate-spin"}):t.jsx(s,{className:"w-6 h-6"}),h?"Optimizing...":"Compress PDF"]}),b&&t.jsxs("p",{className:"mt-4 text-red-500 font-medium flex items-center justify-center gap-2",children:[t.jsx(l,{className:"w-5 h-5"})," ",b]})]})}),t.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"p-6 bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center mb-3 text-blue-600",children:t.jsx(n,{className:"w-5 h-5"})}),t.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-2",children:"Structure Cleanup"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Removes unused objects, edit history, and redundant data streams to save space."})]}),t.jsxs("div",{className:"p-6 bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center mb-3 text-green-600",children:t.jsx(c,{className:"w-5 h-5"})}),t.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-2",children:"Privacy Enhanced"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Optionally strips hidden metadata like author name and creation dates."})]}),t.jsxs("div",{className:"p-6 bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mb-3 text-purple-600",children:t.jsx(s,{className:"w-5 h-5"})}),t.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-2",children:"No Quality Loss"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Optimization focuses on file structure, so images and text remain crisp."})]})]})]})};export{x as default};
